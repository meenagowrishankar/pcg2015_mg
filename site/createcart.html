<!DOCTYPE html>
<html>
<head>
	<link href = "createcart.css" type = "text/css" rel="stylesheet"
	>

</head>
<body>
	<div id = "cart">
		<form> 
		<fieldset>
			<legend>Cart</legend>
			name: <input type = "text" name = "name"><br><br>
			email: <input type = "text" name = "email"><br><br>
			phone: <input type = "text" name = "phone">
		</fieldset><br><br>
		</form>
	</div>
	<div >
		<table id = "table">
			<tr class = "cart titles">
				<th>
					LINE
				</th>
				<th >
					QTY
				</th>
				<th >
					Product Code
				</th>
				<th >
					Product Description
				</th>
				<th>
					Price Each
				</th>
				<th>
					Qty*price
				</th>
				<th>
					Actions
				</th>
			</tr>
			<tr id = "1" class = "cart-line">
				<td class = "number">
					1
				</td>
				<td class = "qty">
					<input type = "number" value = "0" class = "qty_size"></input>
				</td>
				<td class = "prod_code">
					g6	
				</td>
				<td>

				</td>
				<td class = "price_ech">
					11
				</td>
				<td class = "qty_price">
					110	
				</td>
				<td>
					<input type = "button" value = "remove" onClick = "removeLine(1)"><!-- <a href = "#remove">Remove</div> -->	
				</td>
			</tr>
			<tr id = "2" class = "cart-line">
				<td>
					2
				</td>
				<td class = "qty">
					<input type = "number" value = "0" class = "qty_size"></input>
				</td>
				<td class = "prod_code">
					PCS150	
				</td>
				<td>

				</td>
				<td class = "price_ech">
					12
				</td>
				<td class = "qty_price">
					240	
				</td>
				<td>
					<input type = "button" value = "remove" onClick = "removeLine(2)">
				</td>

			</tr>
			<tr id = "3" class = "cart-line">
				<td>
					3
				</td>
				<td class = "qty">
					<input type = "number" value = "0" class = "qty_size"></input>
				</td>
				<td class = "prod_code">
					PCS000	
				</td>
				<td>

				</td>
				<td class = "price_ech">
					15
				</td>
				<td class = "qty_price">
					450	
				</td>
				<td>
					<input type = "button" value = "remove" onClick = "removeLine(3)">
				</td>

			</tr>

			<tr class = "cart_total">
				<td colspan = "5" class = "total">
					TOTAL
				</td>
				<td ID = "cart-total">
					
				</td>
				<td>
					
				</td>

			</tr>


		</table>
	</div>

<script>
function getTotal() {
	var total = 0;
	var table = document.getElementById("table");
	var lines = table.getElementsByClassName("cart-line");
	var line_count = lines.length;

	for (var i = 0; i < line_count; i++){
		var line = lines[i];

		var qty = line.getElementsByClassName("qty")[0];
		var quantity = parseFloat(qty.getElementsByTagName("input")[0].value);

		var price = parseFloat(line.getElementsByClassName("price_ech")[0].innerHTML);
		var subtotalElement = line.getElementsByClassName("qty_price")[0];

		var subtotal = quantity * price;
		subtotalElement.innerHTML = subtotal;
		total += subtotal;
	}
	var totalElement = document.getElementById("cart-total");
	totalElement.innerHTML = total;
};

function removeLine (lineId){
	var line = document.getElementById(lineId);

	line.parentNode.removeChild(line);	

	getTotal();
};

document.addEventListener("DOMContentLoaded", function() {
	var table = document.getElementById("table");
	var lines = table.getElementsByClassName("cart-line");
	var line_count = lines.length;

	for(var c = 0; c<line_count; c++){
		var line = lines[c];
		var quantityElement = line.getElementsByTagName("input")[0];
		quantityElement.addEventListener("change", function() {
			getTotal();
		});
	};
	getTotal();
});	

</script>
</body>
</html>